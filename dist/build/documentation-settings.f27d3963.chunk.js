"use strict";(self.webpackChunkgen_cms=self.webpackChunkgen_cms||[]).push([[8503],{31346:(M,c,e)=>{e.r(c),e.d(c,{default:()=>U});var t=e(67294),r=e(86896),m=e(14916),l=e(81849),P=e(185),y=e(53979),u=e(29728),f=e(49066),v=e(41580),A=e(11047),j=e(75515),O=e(11276),s=e(74571),o=e(20707),i=e(16364),n=e(85018),d=e(8934),g=e(94123),x=e(80826),E=e(93742),a=e(90306),p=e(1565),Z=e(25752);const W=(0,p.ZP)(Z.E)`
  svg {
    height: 1rem;
    width: 1rem;
    path {
      fill: ${({theme:h})=>h.colors.neutral600};
    }
  }
`;var R=e(87561);const w=R.Ry().shape({restrictedAccess:R.O7(),password:R.Z_().when("restrictedAccess",(h,D)=>h?D.required(l.I0.required):D)}),U=()=>{(0,l.go)();const{formatMessage:h}=(0,r.Z)(),{submitMutation:D,data:B,isLoading:K}=(0,a.Z)(),[L,$]=(0,t.useState)(!1),F=T=>{D.mutate({prefix:B?.prefix,body:T})};return t.createElement(P.o,null,K?t.createElement(l.dO,null,"Plugin settings are loading"):t.createElement(m.J9,{initialValues:{restrictedAccess:B?.documentationAccess.restrictedAccess||!1,password:""},onSubmit:F,validationSchema:w},({handleSubmit:T,values:C,handleChange:b,errors:S,setFieldTouched:Q,setFieldValue:I})=>t.createElement(l.l0,{noValidate:!0,onSubmit:T},t.createElement(y.T,{title:h({id:(0,E.O)("plugin.name"),defaultMessage:"Documentation"}),subtitle:h({id:(0,E.O)("pages.SettingsPage.header.description"),defaultMessage:"Configure the documentation plugin"}),primaryAction:t.createElement(l.jW,{permissions:x.Z.update},t.createElement(u.z,{type:"submit",startIcon:t.createElement(n.Z,null)},h({id:(0,E.O)("pages.SettingsPage.Button.save"),defaultMessage:"Save"})))}),t.createElement(f.D,null,t.createElement(v.x,{background:"neutral0",hasRadius:!0,shadow:"filterShadow",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7},t.createElement(A.k,{direction:"column",alignItems:"stretch",gap:4},t.createElement(j.Z,{variant:"delta",as:"h2"},h({id:"global.settings",defaultMessage:"Settings"})),t.createElement(O.r,{gap:4},t.createElement(s.P,{col:6,s:12},t.createElement(o.s,{name:"restrictedAccess",label:h({id:(0,E.O)("pages.SettingsPage.toggle.label"),defaultMessage:"Restricted Access"}),hint:h({id:(0,E.O)("pages.SettingsPage.toggle.hint"),defaultMessage:"Make the documentation endpoint private"}),checked:C.restrictedAccess,onChange:()=>{C.restrictedAccess===!0&&(I("password","",!1),Q("password",!1,!1)),I("restrictedAccess",!C.restrictedAccess,!1)},onLabel:"On",offLabel:"Off"})),C.restrictedAccess&&t.createElement(s.P,{col:6,s:12},t.createElement(i.o,{label:h({id:"global.password",defaultMessage:"Password"}),name:"password",placeholder:"**********",type:L?"text":"password",value:C.password,onChange:b,error:S.password?h({id:S.password,defaultMessage:"Invalid value"}):null,endAction:t.createElement(W,{onClick:z=>{z.stopPropagation(),$(H=>!H)},label:h(L?{id:"Auth.form.password.show-password",defaultMessage:"Show password"}:{id:"Auth.form.password.hide-password",defaultMessage:"Hide password"})},L?t.createElement(d.Z,null):t.createElement(g.Z,null))})))))))))}},90306:(M,c,e)=>{e.d(c,{Z:()=>y});var t=e(88767),r=e(81849),m=e(49950),l=e(798);const y=()=>{const u=(0,t.useQueryClient)(),f=(0,r.lm)(),{isLoading:v,isError:A,data:j}=(0,t.useQuery)(["get-documentation",m.Z],async()=>{try{const{data:a}=await i(`/${m.Z}/getInfos`);return a}catch{return f({type:"warning",message:{id:"notification.error"}}),null}}),{del:O,post:s,put:o,get:i}=(0,r.kY)(),n=a=>{f({type:"warning",message:a.response.payload.message})},d=(a,p)=>{u.invalidateQueries("get-documentation"),f({type:a,message:{id:(0,l.Z)(p)}})},g=(0,t.useMutation)(({prefix:a,version:p})=>O(`${a}/deleteDoc/${p}`),{onSuccess:()=>d("info","notification.delete.success"),onError:a=>n(a)}),x=(0,t.useMutation)(({prefix:a,body:p})=>o(`${a}/updateSettings`,p),{onSuccess:()=>d("success","notification.update.success"),onError:n}),E=(0,t.useMutation)(({prefix:a,version:p})=>s(`${a}/regenerateDoc`,{version:p}),{onSuccess:()=>d("info","notification.generate.success"),onError:a=>n(a)});return{data:j,isLoading:v,isError:A,deleteMutation:g,submitMutation:x,regenerateDocMutation:E}}},798:(M,c,e)=>{e.d(c,{Z:()=>m});var t=e(49950);const m=l=>`${t.Z}.${l}`},93742:(M,c,e)=>{e.d(c,{O:()=>t.Z});var t=e(798)},49066:(M,c,e)=>{e.d(c,{D:()=>m});var t=e(85893),r=e(41580);const m=({children:l})=>(0,t.jsx)(r.x,{paddingLeft:10,paddingRight:10,children:l})},53979:(M,c,e)=>{e.d(c,{T:()=>A});var t=e(85893),r=e(67294),m=e(1565);const l=s=>{const o=(0,r.useRef)(null),[i,n]=(0,r.useState)(!0),d=([g])=>{n(g.isIntersecting)};return(0,r.useEffect)(()=>{const g=o.current,x=new IntersectionObserver(d,s);return g&&x.observe(o.current),()=>{g&&x.disconnect()}},[o,s]),[o,i]};var P=e(79698);const y=(s,o)=>{const i=(0,P.W)(o);(0,r.useLayoutEffect)(()=>{const n=new ResizeObserver(i);return Array.isArray(s)?s.forEach(d=>{d.current&&n.observe(d.current)}):s.current&&n.observe(s.current),()=>{n.disconnect()}},[s,i])};var u=e(41580),f=e(11047),v=e(75515);const A=s=>{const o=(0,r.useRef)(null),[i,n]=(0,r.useState)(null),[d,g]=l({root:null,rootMargin:"0px",threshold:0});return y(d,()=>{d.current&&n(d.current.getBoundingClientRect())}),(0,r.useEffect)(()=>{o.current&&n(o.current.getBoundingClientRect())},[o]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{style:{height:i?.height},ref:d,children:g&&(0,t.jsx)(O,{ref:o,...s})}),!g&&(0,t.jsx)(O,{...s,sticky:!0,width:i?.width})]})};A.displayName="HeaderLayout";const j=(0,m.ZP)(u.x)`
  width: ${({width:s})=>s?`${s/16}rem`:void 0};
  z-index: ${({theme:s})=>s.zIndices[1]};
`,O=r.forwardRef(({navigationAction:s,primaryAction:o,secondaryAction:i,subtitle:n,title:d,sticky:g,width:x,...E},a)=>{const p=typeof n=="string";return g?(0,t.jsx)(j,{paddingLeft:6,paddingRight:6,paddingTop:3,paddingBottom:3,position:"fixed",top:0,right:0,background:"neutral0",shadow:"tableShadow",width:x,"data-strapi-header-sticky":!0,children:(0,t.jsxs)(f.k,{justifyContent:"space-between",children:[(0,t.jsxs)(f.k,{children:[s&&(0,t.jsx)(u.x,{paddingRight:3,children:s}),(0,t.jsxs)(u.x,{children:[(0,t.jsx)(v.Z,{variant:"beta",as:"h1",...E,children:d}),p?(0,t.jsx)(v.Z,{variant:"pi",textColor:"neutral600",children:n}):n]}),i?(0,t.jsx)(u.x,{paddingLeft:4,children:i}):null]}),(0,t.jsx)(f.k,{children:o?(0,t.jsx)(u.x,{paddingLeft:2,children:o}):void 0})]})}):(0,t.jsxs)(u.x,{ref:a,paddingLeft:10,paddingRight:10,paddingBottom:8,paddingTop:s?6:8,background:"neutral100","data-strapi-header":!0,children:[s?(0,t.jsx)(u.x,{paddingBottom:2,children:s}):null,(0,t.jsxs)(f.k,{justifyContent:"space-between",children:[(0,t.jsxs)(f.k,{minWidth:0,children:[(0,t.jsx)(v.Z,{as:"h1",variant:"alpha",...E,children:d}),i?(0,t.jsx)(u.x,{paddingLeft:4,children:i}):null]}),o]}),p?(0,t.jsx)(v.Z,{variant:"epsilon",textColor:"neutral600",as:"p",children:n}):n]})})},185:(M,c,e)=>{e.d(c,{o:()=>P});var t=e(85893),r=e(1565),m=e(41580);const l=(0,r.ZP)(m.x)`
  // To prevent global outline on focus visible to force an outline when Main is focused
  &:focus-visible {
    outline: none;
  }
`,P=({labelledBy:y="main-content-title",...u})=>(0,t.jsx)(l,{"aria-labelledby":y,as:"main",id:"main-content",tabIndex:-1,...u})}}]);
